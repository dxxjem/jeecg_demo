# 员工基本信息管理模块完整实施方案

## 一、项目概述

基于JeecgBoot 3.8.2框架开发人力资源管理系统的员工基本信息管理模块，实现员工信息的增删改查、搜索、导入导出等基础功能。

## 二、需求分析

### 2.1 功能需求
- **基础CRUD操作**：添加、编辑、删除、查询员工信息
- **列表管理**：分页展示、排序、搜索筛选
- **数据操作**：批量删除、Excel导入导出
- **表单验证**：数据格式验证、唯一性校验
- **用户界面**：友好的操作界面和交互体验

### 2.2 数据字段
- **基本信息**：员工工号、姓名、性别、出生日期、身份证号
- **联系方式**：手机号码、邮箱、联系地址
- **工作信息**：所属部门、职位、入职日期、员工状态
- **紧急联系**：紧急联系人、紧急联系电话
- **其他信息**：学历、备注、系统字段

### 2.3 非功能需求
- **性能要求**：支持大数据量分页查询
- **安全性**：数据验证、SQL注入防护
- **可用性**：友好的用户界面和操作提示
- **可维护性**：模块化设计，便于扩展

## 三、技术架构

### 3.1 技术选型
- **后端框架**：Spring Boot 2.7.18
- **数据访问**：MyBatis-Plus 3.5.12
- **前端框架**：Vue3 + TypeScript
- **UI组件库**：Element Plus
- **数据库**：MySQL
- **构建工具**：Maven

### 3.2 架构设计
- **分层架构**：Controller → Service → Mapper → Database
- **模块划分**：demo/hr子模块
- **代码生成**：基于JeecgBoot代码生成器
- **权限控制**：基于Apache Shiro

## 四、数据库设计

### 4.1 表结构设计
- **主表名称**：employee
- **主键策略**：ASSIGN_ID（雪花算法）
- **删除策略**：逻辑删除（del_flag字段）
- **索引设计**：员工工号唯一索引、部门ID索引、创建时间索引

### 4.2 字段设计
- **业务字段**：员工基本信息、工作信息、联系方式等
- **系统字段**：创建时间、更新时间、创建人、更新人
- **枚举字段**：性别、员工状态、学历等（使用数据字典）
- **验证字段**：身份证号、手机号、邮箱格式验证

### 4.3 数据字典
- **性别字典**：男(male)、女(female)
- **员工状态字典**：在职(active)、离职(inactive)、试用(trial)
- **学历字典**：博士(doctor)、硕士(master)、本科(bachelor)、专科(college)、其他(other)

## 五、前后端接口设计

### 5.1 接口协议规范

#### 5.1.1 通用协议信息
- **协议类型**：HTTP/HTTPS
- **数据格式**：JSON
- **字符编码**：UTF-8
- **认证方式**：JWT Token (Header: X-Access-Token)
- **API版本**：v1
- **基础路径**：/jeecg-boot/demo/hr/employee

#### 5.1.2 统一响应格式
```json
{
  "success": true,
  "message": "操作成功",
  "code": 200,
  "result": {},
  "timestamp": 1700000000000
}
```

**字段说明**：
- `success`: 操作是否成功 (boolean)
- `message`: 响应消息 (string)
- `code`: 业务状态码 (number)
- `result`: 业务数据 (object/array)
- `timestamp`: 响应时间戳 (number)

#### 5.1.3 分页响应格式
```json
{
  "success": true,
  "message": "查询成功",
  "code": 200,
  "result": {
    "records": [],
    "total": 100,
    "size": 10,
    "current": 1,
    "pages": 10,
    "optimizeCountSql": true,
    "searchCount": true,
    "countId": null
  },
  "timestamp": 1700000000000
}
```

**分页字段说明**：
- `records`: 数据记录列表
- `total`: 总记录数
- `size`: 每页记录数
- `current`: 当前页码
- `pages`: 总页数

#### 5.1.4 错误响应格式
```json
{
  "success": false,
  "message": "错误描述",
  "code": 500,
  "result": null,
  "timestamp": 1700000000000
}
```

### 5.2 API接口详细定义

#### 5.2.1 员工列表查询接口
- **接口路径**：`GET /demo/hr/employee/list`
- **接口描述**：分页查询员工列表信息
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **查询参数**：
  - `pageNo`: 页码 (number, 默认: 1)
  - `pageSize`: 每页数量 (number, 默认: 10, 最大: 100)
  - `employeeNo`: 员工工号 (string, 可选, 支持模糊查询)
  - `name`: 姓名 (string, 可选, 支持模糊查询)
  - `mobile`: 手机号码 (string, 可选, 支持模糊查询)
  - `employeeStatus`: 员工状态 (string, 可选, 枚举值)
  - `gender`: 性别 (string, 可选, 枚举值)
  - `departmentId`: 部门ID (string, 可选)
  - `position`: 职位 (string, 可选, 支持模糊查询)
  - `education`: 学历 (string, 可选, 枚举值)
  - `hireDate_begin`: 入职日期开始范围 (date, 可选)
  - `hireDate_end`: 入职日期结束范围 (date, 可选)
  - `column`: 排序字段 (string, 可选)
  - `order`: 排序方式 (string, 可选, asc/desc)
- **响应示例**：
```json
{
  "success": true,
  "message": "查询成功",
  "code": 200,
  "result": {
    "records": [
      {
        "id": "1234567890",
        "employeeNo": "EMP001",
        "name": "张三",
        "gender": "male",
        "gender_dictText": "男",
        "birthDate": "1990-01-01",
        "idCard": "110101199001011234",
        "mobile": "13800138001",
        "email": "zhangsan@example.com",
        "departmentId": "DEPT001",
        "position": "软件工程师",
        "hireDate": "2023-01-01",
        "employeeStatus": "active",
        "employeeStatus_dictText": "在职",
        "address": "北京市朝阳区",
        "emergencyContact": "李四",
        "emergencyPhone": "13900139001",
        "education": "bachelor",
        "education_dictText": "本科",
        "remark": "优秀员工",
        "createBy": "admin",
        "createTime": "2023-01-01 10:00:00",
        "updateBy": "admin",
        "updateTime": "2023-12-01 15:30:00"
      }
    ],
    "total": 1,
    "size": 10,
    "current": 1,
    "pages": 1
  },
  "timestamp": 1700000000000
}
```

#### 5.2.2 员工详情查询接口
- **接口路径**：`GET /demo/hr/employee/queryById`
- **接口描述**：根据员工ID查询详细信息
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **查询参数**：
  - `id`: 员工ID (string, 必需)
- **响应示例**：
```json
{
  "success": true,
  "message": "查询成功",
  "code": 200,
  "result": {
    "id": "1234567890",
    "employeeNo": "EMP001",
    "name": "张三",
    "gender": "male",
    "gender_dictText": "男",
    "birthDate": "1990-01-01",
    "idCard": "110101199001011234",
    "mobile": "13800138001",
    "email": "zhangsan@example.com",
    "departmentId": "DEPT001",
    "position": "软件工程师",
    "hireDate": "2023-01-01",
    "employeeStatus": "active",
    "employeeStatus_dictText": "在职",
    "address": "北京市朝阳区",
    "emergencyContact": "李四",
    "emergencyPhone": "13900139001",
    "education": "bachelor",
    "education_dictText": "本科",
    "remark": "优秀员工",
    "createBy": "admin",
    "createTime": "2023-01-01 10:00:00",
    "updateBy": "admin",
    "updateTime": "2023-12-01 15:30:00"
  },
  "timestamp": 1700000000000
}
```

#### 5.2.3 新增员工接口
- **接口路径**：`POST /demo/hr/employee/add`
- **接口描述**：新增员工信息
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **请求体**：
```json
{
  "employeeNo": "EMP002",
  "name": "李四",
  "gender": "female",
  "birthDate": "1992-02-02",
  "idCard": "110101199002022345",
  "mobile": "13800138002",
  "email": "lisi@example.com",
  "departmentId": "DEPT002",
  "position": "产品经理",
  "hireDate": "2023-02-01",
  "employeeStatus": "active",
  "address": "北京市海淀区",
  "emergencyContact": "张三",
  "emergencyPhone": "13800138001",
  "education": "master",
  "remark": "新入职员工"
}
```
- **字段验证规则**：
  - `employeeNo`: 必填，唯一，2-32字符
  - `name`: 必填，2-50字符
  - `idCard`: 可选，符合身份证格式
  - `mobile`: 可选，符合手机号格式
  - `email`: 可选，符合邮箱格式
- **响应示例**：
```json
{
  "success": true,
  "message": "添加成功！",
  "code": 200,
  "result": null,
  "timestamp": 1700000000000
}
```

#### 5.2.4 编辑员工接口
- **接口路径**：`PUT /demo/hr/employee/edit`
- **接口描述**：修改员工信息
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **请求体**：
```json
{
  "id": "1234567890",
  "employeeNo": "EMP001",
  "name": "张三",
  "gender": "male",
  "birthDate": "1990-01-01",
  "idCard": "110101199001011234",
  "mobile": "13800138001",
  "email": "zhangsan@example.com",
  "departmentId": "DEPT001",
  "position": "高级软件工程师",
  "hireDate": "2023-01-01",
  "employeeStatus": "active",
  "address": "北京市朝阳区",
  "emergencyContact": "李四",
  "emergencyPhone": "13900139001",
  "education": "bachelor",
  "remark": "优秀员工，已晋升"
}
```
- **验证规则**：
  - `id`: 必填，有效的员工ID
  - 其他字段验证规则与新增接口相同
- **响应示例**：
```json
{
  "success": true,
  "message": "编辑成功!",
  "code": 200,
  "result": null,
  "timestamp": 1700000000000
}
```

#### 5.2.5 删除员工接口
- **接口路径**：`DELETE /demo/hr/employee/delete`
- **接口描述**：删除单个员工（逻辑删除）
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **查询参数**：
  - `id`: 员工ID (string, 必需)
- **响应示例**：
```json
{
  "success": true,
  "message": "删除成功!",
  "code": 200,
  "result": null,
  "timestamp": 1700000000000
}
```

#### 5.2.6 批量删除员工接口
- **接口路径**：`DELETE /demo/hr/employee/deleteBatch`
- **接口描述**：批量删除员工（逻辑删除）
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: application/json
- **查询参数**：
  - `ids`: 员工ID列表，逗号分隔 (string, 必需)
- **请求示例**：
  ```
  DELETE /demo/hr/employee/deleteBatch?ids=id1,id2,id3
  ```
- **响应示例**：
```json
{
  "success": true,
  "message": "批量删除成功!",
  "code": 200,
  "result": null,
  "timestamp": 1700000000000
}
```

#### 5.2.7 导出员工数据接口
- **接口路径**：`GET /demo/hr/employee/exportXls`
- **接口描述**：导出员工数据到Excel文件
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
- **查询参数**：
  - 与列表查询接口相同的过滤参数
- **响应**：
  - 文件流 (application/vnd.openxmlformats-officedocument.spreadsheetml.sheet)
  - 文件名：员工信息_20231201.xlsx

#### 5.2.8 导入员工数据接口
- **接口路径**：`POST /demo/hr/employee/importExcel`
- **接口描述**：从Excel文件导入员工数据
- **请求头**：
  - `X-Access-Token`: JWT认证令牌 (必需)
  - `Content-Type`: multipart/form-data
- **请求体**：
  - `file`: Excel文件 (file, 必需)
- **响应示例**：
```json
{
  "success": true,
  "message": "导入成功，共导入10条数据",
  "code": 200,
  "result": {
    "total": 10,
    "success": 8,
    "failure": 2,
    "failureMsg": "第3行数据格式错误，第7行员工工号重复"
  },
  "timestamp": 1700000000000
}
```

### 5.3 状态码定义

| 状态码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误 |
| 401 | 未认证或认证失败 |
| 403 | 无权限访问 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

### 5.4 业务错误码

| 错误码 | 说明 |
|--------|------|
| 1001 | 员工工号已存在 |
| 1002 | 员工信息不存在 |
| 1003 | 身份证号格式错误 |
| 1004 | 手机号格式错误 |
| 1005 | 邮箱格式错误 |
| 1006 | 部门不存在 |
| 1007 | 导入数据格式错误 |

### 5.5 数据验证规则

#### 5.5.1 字段格式验证
- **员工工号**：长度2-32字符，支持字母、数字、下划线
- **姓名**：长度2-50字符，支持中文、英文
- **身份证号**：18位，符合国家标准格式
- **手机号**：11位，以1开头
- **邮箱**：标准邮箱格式
- **日期**：YYYY-MM-DD格式

#### 5.5.2 业务验证
- **员工工号唯一性**：同一工号不能重复
- **身份证号唯一性**：同一身份证号不能重复
- **手机号唯一性**：同一手机号不能重复（根据业务需求）
- **入职日期有效性**：不能晚于当前日期
- **出生日期有效性**：不能晚于当前日期，年龄范围18-65岁

### 5.6 认证与授权

#### 5.6.1 认证机制
- 使用JWT Token进行身份认证
- Token有效期为24小时
- Token需在请求头中传递：`X-Access-Token: <token>`

#### 5.6.2 权限控制
- **查看权限**：employee:list
- **新增权限**：employee:add
- **编辑权限**：employee:edit
- **删除权限**：employee:delete
- **导出权限**：employee:export
- **导入权限**：employee:import

### 5.7 性能要求

- **查询响应时间**：小于2秒（10万条数据以内）
- **新增响应时间**：小于1秒
- **批量操作**：每次最多处理1000条记录
- **文件上传**：Excel文件大小限制为10MB
- **并发支持**：支持100个并发请求

## 六、文件结构设计

### 6.1 后端文件结构
```
jeecg-boot\jeecg-boot-module\jeecg-module-demo\src\main\java\org\jeecg\modules\demo\hr\
├── entity/                 # 实体类
│   └── Employee.java
├── mapper/                 # 数据访问层
│   ├── EmployeeMapper.java
│   └── xml/
│       └── EmployeeMapper.xml
├── service/                # 业务逻辑层
│   ├── IEmployeeService.java
│   └── impl/
│       └── EmployeeServiceImpl.java
├── controller/             # 控制器层
│   └── EmployeeController.java
└── vo/                     # 数据传输对象
    ├── EmployeeVO.java
    └── EmployeeDTO.java
```

### 6.2 前端文件结构
```
jeecgboot-vue3\src\views\demo\hr\employee\
├── index.vue              # 员工列表页面
├── components/            # 组件目录
│   ├── EmployeeModal.vue  # 新增编辑弹窗
│   └── EmployeeForm.vue   # 表单组件
├── api/
│   └── employee.ts        # API接口定义
└── model/
    └── employeeModel.ts   # 数据模型定义
```

### 6.3 数据库脚本位置
```
jeecg-boot\jeecg-boot-module\jeecg-module-demo\src\main\resources\db\hr\migration\
└── V1.0.0__Create_employee_table.sql
```

## 七、功能模块设计

### 7.1 列表页面功能
- **搜索区域**：员工工号、姓名搜索
- **操作按钮**：新增、导出、导入、批量删除
- **数据表格**：分页、排序、选择、操作列
- **表格列**：序号、工号、姓名、性别、手机、邮箱、职位、状态、入职日期、操作

### 7.2 表单页面功能
- **基础信息**：员工工号、姓名、性别、出生日期
- **联系信息**：手机号码、邮箱、联系地址
- **工作信息**：职位、入职日期、员工状态、学历
- **紧急联系**：紧急联系人、紧急联系电话
- **其他信息**：备注

### 7.3 表单验证规则
- **必填字段**：员工工号、姓名
- **格式验证**：身份证号、手机号、邮箱
- **唯一性验证**：员工工号不能重复
- **长度限制**：各字段长度限制


## 九、部署配置

### 9.1 应用启动
- **启动命令**：使用Spring Boot启动脚本
- **配置文件**：application-dev.yml配置数据库连接
- **端口配置**：默认8080端口

### 9.2 访问地址
- **前端访问**：http://localhost:3000/#/demo/hr/employee
- **API文档**：http://localhost:8080/jeecg-boot/doc.html
- **后台管理**：http://localhost:8080/jeecg-boot/

### 9.3 默认账号
- **管理员**：admin/123456
- **功能访问**：需要配置菜单和权限


---
